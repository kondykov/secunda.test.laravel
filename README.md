# Тестовое задание "Создание REST API приложения"

## Описание проекта

Это REST API приложение для справочника Организаций, Зданий и Деятельностей. Реализовано на фреймворке Laravel с использованием MySQL базы данных. Приложение упаковано в Docker контейнеры для легкого развертывания.

### Основные сущности

- **Организация**: Карточка организации с названием, телефонами, зданием и деятельностями.
- **Здание**: Информация о здании с адресом и географическими координатами.
- **Деятельность**: Классификация деятельностей в древовидной структуре (до 3 уровней вложенности).

## Функционал API

API использует статический API ключ для аутентификации. Все ответы в формате JSON.

### Методы API

- Список всех организаций в конкретном здании
- Список всех организаций по виду деятельности (включая подкатегории)
- Список организаций в заданном радиусе/прямоугольной области относительно точки на карте
- Информация об организации по ID
- Поиск организаций по названию
- CRUD операции для Организаций, Зданий, Деятельностей и связей

## Технологии

- Laravel 12
- MySQL 8.0
- Docker & Docker Compose
- Swagger UI для документации API (l5-swagger)

## Установка и запуск

1. Клонируйте репозиторий.
2. Перейдите в директорию `src/` проекта.
3. Скопируйте файл `.env.example` в `.env`:

```bash
cp .env.example .env
```

4. Откройте `.env` и настройте подключение к базе данных (если необходимо, измените с SQLite на MySQL):

```env
DB_CONNECTION=mysql
DB_HOST=db
DB_PORT=3306
DB_DATABASE=db
DB_USERNAME=root
DB_PASSWORD=root
```

5. Вернитесь в корневую директорию проекта и запустите Docker Compose:

```bash
docker-compose up --build
```

6. Сгенерируйте ключ приложения:

```bash
docker exec secunda.test.app php artisan key:generate
```
Приложение будет доступно по адресу: http://localhost:8080

База данных: localhost:8090 (root/root) (Только для локального развёртывания)

## Документация API

Документация API доступна по адресу: http://localhost:8080/api/documentation

## Структура проекта

- `src/` - Исходный код Laravel приложения
- `docker-compose.yml` - Конфигурация Docker
- `env/` - Конфигурационные файлы для Docker

## Миграции и сиды

Миграции и тестовые данные находятся в `src/database/migrations/` и `src/database/seeders/`.

Для запуска миграций внутри контейнера:

```bash
docker exec secunda.test.app php artisan migrate
docker exec secunda.test.app php artisan db:seed
```

## Автор

Кондыков Сергей

`kondykovs@gmail.com`
`kondykovs@yandex.ru`
